<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Dovetail</title>

        <!-- loading -->
        <script>
            let loading = true; 

            function setLoadBackground(){
                let randomImage = Math.ceil(Math.random() * 10);
                document.getElementById("loading-container").style.backgroundImage = "url('./images/loading/" + randomImage + ".png')";
            }

            function setLoadTip(){
                const tips = [
                    "If your inputs aren't being recognized, be sure to click the mouse inside of the browswer window to make sure it is active.",
                    "Once I have tips to write here this is where they will go.",
                    "Perhaps locations of easter eggs will be located here.",
                    "Perhaps messages will cycle based on rarity rather than completely random."
                ]

                let randomTip = Math.floor(Math.random() * tips.length);
                document.getElementById("loading-tip").innerHTML = tips[randomTip];
            }

            const triggerBackground = setInterval(() => {
                if(loading){
                    setLoadBackground();
                }else{
                    clearInterval(triggerBackground);
                }
            }, 5000);

            const triggerTip = setInterval(() => {
                if(loading){
                    setLoadTip();
                }else{
                    clearInterval(triggerTip);
                }
            }, 2500);
            
            document.onreadystatechange = function() {
                if (document.readyState !== "complete") {
                    triggerBackground();
                    triggerTip();
                    document.querySelector("#container").style.display = "none";
                    document.querySelector("#footer").style.display = "none";
                    document.querySelector("#loading-container").style.display = "block";
                } else {
                    document.querySelector("#loading-container").style.display = "none";
                    document.querySelector("#container").style.display = "block"; 
                    document.querySelector("#footer").style.display = "block"; 
                    loading = false;
                }
            };
        </script>

        <!-- browser settings -->
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- styles -->
        <link rel="stylesheet" href="./styles/index.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Lavishly+Yours&family=Roboto&display=swap" rel="stylesheet" />  
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet" />
        
        <!-- functions -->
        <script type="text/javascript" src="./functions/changeScreen.js"></script>
        <script type="text/javascript" src="./functions/loadGame.js"></script>
        <script type="text/javascript" src="./functions/setModalContent.js"></script>
        <script type="text/javascript" src="./functions/setSnackbar.js"></script>
        <script type="text/javascript" src="./functions/playSound.js"></script>
        <script type="text/javascript" src="./functions/stopSound.js"></script>
        <script type="text/javascript" src="./functions/renderMap.js"></script>
        <script type="text/javascript" src="./functions/keyboard.js"></script>


        <!-- classes -->
        <script type="text/javascript" src="./classes/Hero.js"></script>

        <!-- screens -->
        <script type="text/javascript" src="./screens/splash.js"></script>
        <script type="text/javascript" src="./screens/newGame.js"></script>
        <script type="text/javascript" src="./screens/deleteGame.js"></script>
        <script type="text/javascript" src="./screens/settings.js"></script>
        <script type="text/javascript" src="./screens/wiki.js"></script>
        <script type="text/javascript" src="./screens/game.js"></script>

        <!-- maps-->
        <script type="text/javascript" src="./maps/_garden.js"></script>

        <!-- audio -->
        <audio id="system-click">
            <source src="./sounds/system-click.mp3" type="audio/mp3">
        </audio>
        <audio id="system-back">
            <source src="./sounds/system-back.mp3" type="audio/mp3">
        </audio>
        <audio id="system-slider">
            <source src="./sounds/system-slider.mp3" type="audio/mp3">
        </audio>
        <audio id="music-title">
            <source src="./sounds/music-title.mp3" type="audio/mp3">
        </audio>
        <audio id="background-1">
            <source src="./sounds/background-1.mp3" type="audio/mp3">
        </audio>
        <audio id="music-acoustic1">
            <source src="./sounds/music-acoustic1.mp3" type="audio/mp3">
        </audio>

    </head>
    <body>
        <div id="loading-container" class="loading-container fade-in">
            <script>setLoadBackground();</script>
            
            <div id="load-footer" class="load-footer">
                <div class="lds-ripple-container">
                    <div class="lds-ripple"><div></div><div></div></div>
                </div>
                   
                <div id="loading-tip" class="loading-tip">
                    <p>Loading...</p>
                </div>
                
                <script>setLoadTip();</script>
            </div>
        </div>

        </div>

        <div id="container" class="container">
            <script>changeScreen(splash)</script>
        </div>

        <div id="modal" class="modal">
            <div id="modal-content" class="modal-content">
            </div>
        </div>

        <div id="snackbar"></div>

        <div id="footer" class="footer">
            <div class="footer-box" onclick="setModalContent(wiki);">
                <center>
                    <span class="material-symbols-outlined">
                        developer_guide
                    </span>
                    <p>Wiki</p>
                </center>
            </div>
            <div class="footer-box" onclick="setModalContent(settings);">
                <center>
                    <span class="material-symbols-outlined">
                        settings
                    </span>
                    <p>Settings</p>
                </center>
            </div>
        </div>
    </body>
</html>